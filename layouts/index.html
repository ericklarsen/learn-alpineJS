<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learning Alpine.js</title>
    <link rel="stylesheet" href="styles.css">
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="store/store.js"></script>
</head>

<style>
    .elipsis {
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
        text-overflow: ellipsis;
        word-break: break-word;
        display: -webkit-box;
    }

    [x-cloak] {
        display: none !important;
    }
</style>

<body x-data>
    <div class="w-full bg-white shadow-md py-3.5 lg:py-6 px-10">
        <div
            class="m-auto max-w-full overflow-x-auto whitespace-nowrap scrollbar-hide w-fit-content h-[30px] md:h-[35px]">
            <template x-for="item in $store.list.data">
                <div class="inline-block cursor-pointer w-fit-content h-full mr-16 last:mr-0"
                    @click="$store.news.onLoad(item.url)">
                    <img src="" x-bind:src="item.image" class="h-full md:h-full object-contain object-center" />
                </div>
            </template>
        </div>
    </div>

    <div x-show="$store.news.loading" x-transition:enter="transition ease-out duration-300"
        x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-1"
        x-transition:leave="transition ease-out duration-300" x-transition:leave-start="opacity-1"
        x-transition:leave-end="opacity-0"
        class="fixed top-0 left-0 w-screen h-screen flex items-center justify-center bg-black/50 z-10">
        <h1 class="text-xl font-bold text-white">Loading...</h1>
    </div>

    <div x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0"
        x-transition:enter-end="opacity-1"
        class="w-full grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 max-w-7xl m-auto p-4 md:p-10 gap-6">

        <template x-cloak x-for="item2 in $store.news.data">
            <a x-bind:href="item2.link" target="blank"
                class="w-full shadow-lg rounded-lg cursor-pointer transform transition-all lg:hover:scale-105">
                <img class="w-full h-[200px] object-cover rounded-t-lg"
                    x-bind:src="item2?.image?.hasOwnProperty('small') ? item2.image.small : item2?.image"
                    src="https://images.pexels.com/photos/2486168/pexels-photo-2486168.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500" />
                <div class="w-full p-4">
                    <h5 class="text-xl font-bold elipsis" x-text="item2.title">Title</h5>
                    <p class="text-sm font-normal mt-1.5 tracking-wide elipsis"
                        x-text="item2?.contentSnippet || item2?.content || item2?.description">
                        Caption Caption Caption Caption Caption</p>
                </div>
            </a>
        </template>
    </div>
</body>

</html>